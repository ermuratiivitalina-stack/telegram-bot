from aiogram import Bot, Dispatcher, types
from aiogram.utils import executor
from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton
import os

BOT_TOKEN = os.getenv('BOT_TOKEN')
bot = Bot(token=BOT_TOKEN)
dp = Dispatcher(bot)

@dp.message_handler(commands=['start'])
async def start_cmd(message: types.Message):
    keyboard = InlineKeyboardMarkup(row_width=2)
    keyboard.add(
        InlineKeyboardButton("–†—É—Å—Å–∫–∏–π üá∑üá∫", callback_data='lang_ru'),
        InlineKeyboardButton("Espa√±ol üá™üá∏", callback_data='lang_es')
    )
    await message.answer("–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ / Choose language", reply_markup=keyboard)

@dp.callback_query_handler(lambda c: c.data.startswith('lang_'))
async def select_language(callback_query: types.CallbackQuery):
    lang = callback_query.data.split('_')[1]
    welcome_text = {
        'ru': "–ü—Ä–∏–≤–µ—Ç! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!",
        'es': "¬°Hola! ¬°Bienvenido!"
    }
    keyboard = InlineKeyboardMarkup(row_width=1)
    keyboard.add(
        InlineKeyboardButton("–•–æ—á—É –∫—É–ø–∏—Ç—å üí≥", url="https://t.me/Linavibeart"),
        InlineKeyboardButton("–£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ ‚ÑπÔ∏è", callback_data='more_info')
    )
    await callback_query.message.answer(welcome_text.get(lang, "Welcome!"), reply_markup=keyboard)
    await callback_query.answer()

@dp.callback_query_handler(lambda c: c.data == 'more_info')
async def more_info(callback_query: types.CallbackQuery):
    promo_video = "https://example.com/promo.mp4"  # Replace with actual video URL or use send_video
    await callback_query.message.answer("üé• –ü—Ä–æ–º–æ —Ä–æ–ª–∏–∫:", disable_web_page_preview=True)
    await callback_query.message.answer(promo_video)

    keyboard = InlineKeyboardMarkup(row_width=1)
    keyboard.add(
        InlineKeyboardButton("–•–æ—á—É –∫—É–ø–∏—Ç—å üí≥", url="https://t.me/Linavibeart"),
        InlineKeyboardButton("–û—Å—Ç–∞–ª–∏—Å—å –≤–æ–ø—Ä–æ—Å—ã ‚ùì", callback_data='faq')
    )
    await callback_query.message.answer("–ß—Ç–æ –¥–∞–ª—å—à–µ?", reply_markup=keyboard)
    await callback_query.answer()

@dp.callback_query_handler(lambda c: c.data == 'faq')
async def faq(callback_query: types.CallbackQuery):
    faq_text = (
        "‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã:\n\n"
        "1. –ö–∞–∫ –∫—É–ø–∏—Ç—å –¥–æ—Å—Ç—É–ø?\n"
        "2. –ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ –ø–æ–¥–ø–∏—Å–∫—É?\n"
        "3. –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É?\n"
        "4. –ö–∞–∫ —Å–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π?\n"
    )
    keyboard = InlineKeyboardMarkup()
    keyboard.add(InlineKeyboardButton("–ü–æ–¥–¥–µ—Ä–∂–∫–∞ üì®", url="https://t.me/Linavibeart"))
    await callback_query.message.answer(faq_text, reply_markup=keyboard)
    await callback_query.answer()

if __name__ == '__main__':
    executor.start_polling(dp, skip_updates=True)
